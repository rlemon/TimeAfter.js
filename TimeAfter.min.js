function TimeAfter(){this.to=0;this.rt=void 0;this.clear()}
TimeAfter.prototype={constructor:TimeAfter,now:function(){return(new Date).getTime()},start:function(){this.st=this.now();this.time=0;this.resume()},stop:function(){clearTimeout(this.to);return this.time},resume:function(){this.rs=this.now();this.check()},register:function(b,c){this.callbacks.push({fn:c,step:0,after:b})},unregister:function(b){this.callbacks=this.callbacks.filter(function(c){return c.fn!=b})},check:function(){var b=this.now(),c=b-(this.rt||this.st);this.time=b-this.st;this.to=setTimeout(this.check.bind(this),
1);this.callbacks.forEach(function(a){a.after&&c>=a.after*(a.step+1)&&("function"===typeof a.fn&&a.fn.call(this,a),a.step++)}.bind(this))},clear:function(){clearTimeout(this.to);this.time=this.st=0;this.callbacks=[]}};